<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nuestros recuerdos</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&family=Playfair+Display:wght@500;600&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg: linear-gradient(145deg, #f3f6f9 0%, #eef3f7 45%, #f8f5f0 100%);
            --panel: rgba(255, 255, 255, 0.78);
            --surface: rgba(255, 255, 255, 0.92);
            --text-main: #2b3137;
            --text-soft: #5f6b78;
            --accent: #2f8f9d;
            --accent-soft: rgba(47, 143, 157, 0.12);
            --shadow: 0 24px 48px rgba(182, 193, 204, 0.35);
            color-scheme: light;
        }

        *, *::before, *::after { box-sizing: border-box; }

        body {
            margin: 0;
            min-height: 100vh;
            background: var(--bg);
            font-family: 'Poppins', Arial, sans-serif;
            color: var(--text-main);
            display: flex;
            flex-direction: column;
        }

        header {
            position: sticky;
            top: 0;
            z-index: 10;
            background: var(--panel);
            border-bottom: 1px solid rgba(209, 219, 228, 0.7);
            backdrop-filter: blur(16px);
            box-shadow: 0 6px 18px rgba(164, 180, 194, 0.28);
        }

        .topbar {
            display: flex;
            flex-wrap: wrap;
            gap: clamp(16px, 4vw, 32px);
            align-items: center;
            justify-content: space-between;
            padding: clamp(18px, 4vw, 28px) clamp(20px, 4.5vw, 48px);
        }

        .topbar-info {
            display: grid;
            gap: 6px;
        }

        .topbar-label {
            font-size: 0.75rem;
            letter-spacing: 0.18em;
            text-transform: uppercase;
            color: var(--text-soft);
        }

        .topbar-title {
            margin: 0;
            font-family: 'Playfair Display', Georgia, serif;
            font-size: clamp(1.8rem, 4vw, 2.6rem);
            font-weight: 600;
        }

        .topbar-date {
            margin: 0;
            color: var(--text-soft);
            font-size: clamp(0.95rem, 2.5vw, 1.05rem);
        }

        .menu-button {
            padding: 12px 22px;
            border-radius: 999px;
            border: 1px solid rgba(47, 143, 157, 0.2);
            background: rgba(47, 143, 157, 0.16);
            color: var(--accent);
            font-weight: 600;
            letter-spacing: 0.04em;
            cursor: pointer;
            transition: transform 0.18s ease, background 0.2s ease;
        }

        .menu-button:hover,
        .menu-button:focus-visible {
            transform: translateY(-1px);
            background: rgba(47, 143, 157, 0.24);
            outline: none;
        }

        .viewer {
            flex: 1;
            display: flex;
            min-height: 0;
        }

        .viewer iframe {
            flex: 1;
            border: none;
            width: 100%;
            background: rgba(255, 255, 255, 0.6);
        }

        .empty-state {
            margin: auto;
            text-align: center;
            color: var(--text-soft);
            max-width: 320px;
            display: none;
        }

        .empty-state.is-visible { display: block; }

        .overlay {
            position: fixed;
            inset: 0;
            display: grid;
            place-items: center;
            padding: clamp(20px, 4vw, 48px);
            background: rgba(17, 26, 37, 0.58);
            backdrop-filter: blur(8px);
            transition: opacity 0.25s ease;
        }

        .overlay[aria-hidden="true"] {
            opacity: 0;
            pointer-events: none;
        }

        .overlay-card {
            width: min(760px, 100%);
            max-height: min(640px, 100%);
            padding: clamp(28px, 6vw, 40px);
            background: var(--surface);
            border-radius: 28px;
            border: 1px solid rgba(220, 228, 236, 0.8);
            box-shadow: var(--shadow);
            display: grid;
            gap: clamp(20px, 3vw, 28px);
            overflow: hidden;
        }

        .overlay-header {
            display: grid;
            gap: 12px;
            text-align: center;
        }

        .overlay-title {
            margin: 0;
            font-family: 'Playfair Display', Georgia, serif;
            font-weight: 600;
            font-size: clamp(2rem, 5vw, 2.8rem);
        }

        .overlay-subtitle {
            margin: 0 auto;
            max-width: 420px;
            color: var(--text-soft);
            font-size: clamp(0.95rem, 2.5vw, 1.05rem);
        }

        .event-list {
            display: grid;
            gap: 14px;
            overflow: auto;
            padding-right: 4px;
        }

        .event-option {
            display: grid;
            grid-template-columns: minmax(0, auto) 1fr;
            gap: 18px;
            align-items: center;
            padding: 16px 20px;
            border-radius: 20px;
            border: 1px solid rgba(209, 219, 228, 0.7);
            background: rgba(255, 255, 255, 0.7);
            cursor: pointer;
            transition: border-color 0.2s ease, box-shadow 0.2s ease, background 0.2s ease;
        }

        .event-option:hover,
        .event-option:focus-within {
            border-color: rgba(47, 143, 157, 0.35);
            background: rgba(47, 143, 157, 0.08);
            box-shadow: 0 12px 24px rgba(182, 193, 204, 0.28);
        }

        .event-option input {
            margin: 0;
            width: 22px;
            height: 22px;
            accent-color: var(--accent);
            cursor: pointer;
        }

        .event-content {
            display: grid;
            gap: 4px;
        }

        .event-name {
            font-weight: 600;
            font-size: 1.05rem;
        }

        .event-meta {
            font-size: 0.92rem;
            color: var(--text-soft);
        }

        .cta-group {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
            justify-content: center;
        }

        .primary {
            padding: 14px 28px;
            border-radius: 999px;
            border: none;
            background: var(--accent);
            color: #fff;
            font-weight: 600;
            letter-spacing: 0.05em;
            cursor: pointer;
            box-shadow: 0 16px 28px rgba(47, 143, 157, 0.28);
            transition: transform 0.18s ease, box-shadow 0.2s ease, background 0.2s ease;
        }

        .primary:hover,
        .primary:focus-visible {
            transform: translateY(-1px);
            background: #277685;
            box-shadow: 0 20px 32px rgba(47, 143, 157, 0.36);
            outline: none;
        }

        .secondary {
            background: transparent;
            border: none;
            color: var(--text-soft);
            cursor: pointer;
            font-weight: 500;
        }

        @media (max-width: 680px) {
            .event-option {
                grid-template-columns: 1fr;
                text-align: center;
            }

            .event-option input {
                justify-self: center;
            }

            .topbar {
                justify-content: center;
            }
        }

        @media (prefers-reduced-motion: reduce) {
            *, *::before, *::after {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
                scroll-behavior: auto !important;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="topbar">
            <div class="topbar-info" id="topbarInfo">
                <span class="topbar-label">Recuerdo actual</span>
                <h1 class="topbar-title" id="currentTitle">Selecciona un recuerdo</h1>
                <p class="topbar-date" id="currentDate">Usa el menú para abrir uno</p>
            </div>
            <button class="menu-button" type="button" id="openMenuBtn">Ver menú</button>
        </div>
    </header>

    <main class="viewer">
        <iframe id="eventFrame" title="Recuerdo" loading="lazy"></iframe>
        <div class="empty-state is-visible" id="emptyState">
            <h2>No has abierto ningún recuerdo todavía</h2>
            <p>Utiliza el menú para elegir uno de los momentos especiales que guardamos aquí.</p>
        </div>
    </main>

    <section class="overlay" id="menuOverlay" role="dialog" aria-modal="true" aria-hidden="false" aria-labelledby="menuTitle">
        <article class="overlay-card">
            <header class="overlay-header">
                <h1 class="overlay-title" id="menuTitle">Nuestros recuerdos</h1>
                <p class="overlay-subtitle">Elige el momento que quieras revivir. Puedes abrir 2 meses o la nueva invitación de 6 meses.</p>
            </header>
            <div class="event-list" id="eventList" role="listbox" aria-label="Recuerdos disponibles"></div>
            <div class="cta-group">
                <button class="primary" type="button" id="loadEventBtn">Abrir recuerdo</button>
                <button class="secondary" type="button" id="closeMenuBtn">Cerrar menú</button>
            </div>
        </article>
    </section>

    <script>
        (function () {
            alert('Hoy Invitación para Maria Gracia a celebrar el fin de su gran proyecto en Iquique! Horario 19:30 lista!');

            const events = [
                {
                    id: '2-meses',
                    title: '2 meses',
                    date: 'Viernes 17 de octubre de 2025',
                    description: 'Celebra nuestro segundo mes exactamente como lo vio ella ese día.',
                    path: 'events/2-meses.html'
                },
                {
                    id: '6-meses',
                    title: '6 meses',
                    date: 'Viernes 22 de mayo de 2026',
                    description: 'Invitación especial para celebrar seis meses con una noche inolvidable.',
                    path: 'events/6-meses.html'
                }
            ];

            const storageKey = 'recuerdoSeleccionado';
            const frame = document.getElementById('eventFrame');
            const overlay = document.getElementById('menuOverlay');
            const eventList = document.getElementById('eventList');
            const loadButton = document.getElementById('loadEventBtn');
            const closeMenuBtn = document.getElementById('closeMenuBtn');
            const openMenuBtn = document.getElementById('openMenuBtn');
            const titleEl = document.getElementById('currentTitle');
            const dateEl = document.getElementById('currentDate');
            const emptyState = document.getElementById('emptyState');

            let selectedId = events[0]?.id || null;

            const stored = localStorage.getItem(storageKey);
            if (stored && events.some(evt => evt.id === stored)) {
                selectedId = stored;
            }

            const renderOptions = () => {
                eventList.innerHTML = '';
                events.forEach((event, index) => {
                    const option = document.createElement('label');
                    option.className = 'event-option';
                    option.setAttribute('data-id', event.id);
                    option.setAttribute('role', 'option');

                    option.innerHTML = `
                        <input type="radio" name="memory" value="${event.id}" ${event.id === selectedId || (!selectedId && index === 0) ? 'checked' : ''}>
                        <div class="event-content">
                            <span class="event-name">${event.title}</span>
                            <span class="event-meta">${event.date}</span>
                            <span class="event-meta">${event.description}</span>
                        </div>
                    `;

                    option.addEventListener('change', () => {
                        const input = option.querySelector('input');
                        if (!input) { return; }
                        selectedId = input.value;
                    });

                    option.addEventListener('click', (eventClick) => {
                        const input = option.querySelector('input');
                        if (!input) { return; }
                        input.checked = true;
                        selectedId = input.value;
                        eventClick.currentTarget.focus();
                    });

                    eventList.appendChild(option);
                });
            };

            const findEvent = (id) => events.find(evt => evt.id === id) || null;

            const loadSelectedEvent = () => {
                const event = findEvent(selectedId) || events[0];
                if (!event) { return; }

                frame.src = event.path;
                titleEl.textContent = event.title;
                dateEl.textContent = event.date;
                emptyState.classList.remove('is-visible');

                localStorage.setItem(storageKey, event.id);
                hideOverlay();
            };

            const showOverlay = () => {
                overlay.setAttribute('aria-hidden', 'false');
            };

            const hideOverlay = () => {
                overlay.setAttribute('aria-hidden', 'true');
            };

            loadButton.addEventListener('click', loadSelectedEvent);
            closeMenuBtn.addEventListener('click', hideOverlay);
            openMenuBtn.addEventListener('click', showOverlay);

            document.addEventListener('keydown', (event) => {
                if (event.key === 'Escape') {
                    hideOverlay();
                }
            });

            renderOptions();
            showOverlay();
            const defaultEvent = findEvent(selectedId);
            if (defaultEvent) {
                frame.src = defaultEvent.path;
                titleEl.textContent = defaultEvent.title;
                dateEl.textContent = defaultEvent.date;
                emptyState.classList.remove('is-visible');
            }
        })();
    </script>
</body>
</html>
